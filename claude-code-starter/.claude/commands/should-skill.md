---
description: "/should-skill - セッションの作業からスキル/コマンド/ルール/フック化すべきパターンを判定・提案"
---

# /should-skill - 自動化パターン判定

現在のセッションで行った作業を振り返り、以下の4種別として保存すべきパターンがあるか判定する。

| 種別 | 用途 | 保存先 |
|------|------|--------|
| **Skill** | 考え方・判断基準・チェックリスト・フレームワーク | `.claude/skills/` |
| **Command** | ツール実行・エージェント起動・ファイル操作の手順 | `.claude/commands/` |
| **Rules** | 常に適用されるべきガイドライン・標準・制約 | `.claude/rules/` |
| **Hooks** | 特定操作の前後に自動実行されるコマンド | `~/.claude/settings.json` |

---

## 実行手順

### 1. セッション振り返り

今回のセッションで行った作業を一覧化する。

```bash
# 変更ファイル確認
git diff --name-only

# TodoWrite履歴から作業パターン抽出
```

---

### 2. 判断フローチャート

```
パターン発見
    ↓
常に自動適用すべき？
  ├─ Yes → 特定操作（Edit/Bash等）の前後？
  │         ├─ Yes → Hooks
  │         └─ No → Rules
  └─ No → 手順？思考？
           ├─ 実行手順 → Command（普遍性要件あり）
           └─ 思考・判断基準 → Skill
```

---

### 3. 各種別の判断条件

#### Skill（3つ以上で提案）

| # | 条件 |
|---|------|
| S1 | 同じ判断・思考パターンを3回以上繰り返した |
| S2 | 複数プロジェクトで再利用できる |
| S3 | 判断基準（if/then）が含まれる |
| S4 | チェックリスト・フレームワークとして整理できる |
| S5 | 忘れやすい・間違えやすい考え方がある |

#### Command（3つ以上 + 普遍性要件）

| # | 条件 |
|---|------|
| C1 | 同じ手順を3回以上繰り返した |
| C2 | 複数プロジェクトで再利用できる |
| C3 | 手順が5ステップ以上ある |
| C4 | ツール実行・エージェント起動を含む |
| C5 | 忘れやすい・間違えやすい手順がある |

**追加要件（全て必須）**:
- プロジェクトを問わず使える（特定ドメインに依存しない）
- 毎セッションまたは毎週使える頻度がある
- `/handoff`、`/resume`、`/commit-push-pr` レベルの普遍性がある

**Commandは数が増えると覚えられないため、本当に普遍的なものだけ提案する。迷ったらSkillにする。**

#### Rules（3つ以上で提案）

| # | 条件 |
|---|------|
| R1 | 毎回守るべきルール・ガイドラインである |
| R2 | 例外なく常に適用されるべき |
| R3 | 手動で毎回思い出すのが困難 |
| R4 | 違反すると品質・セキュリティに影響する |

#### Hooks（3つ以上で提案）

| # | 条件 |
|---|------|
| H1 | 特定のツール（Edit/Bash/Write等）の前後に実行したい |
| H2 | 毎回手動で実行するのを忘れやすい |
| H3 | 自動チェック・警告・フォーマットが必要 |
| H4 | シェルコマンドで実現できる |

---

### 4. 提案フォーマット

該当パターンがある場合、以下のフォーマットで提案する。

```
## 自動化パターン提案

### パターン: [パターン名]
- **種別**: Skill / Command / Rules / Hooks
- **該当条件**: [S1,S3,S4] (3/5)
- **保存先**: `.claude/skills/xxx.md`
- **概要**: [1行説明]

作成しますか？
```

---

### 5. 作成アクション

#### Skill / Command / Rules の場合

1. 該当ディレクトリにファイル作成
2. CLAUDE.md の既存一覧に追記

#### Hooks の場合

1. `~/.claude/settings.json` の `hooks` セクションを編集
2. JSON構文が壊れていないことを確認

**Hooksの形式例**:
```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c '実行したいコマンド'"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c '実行したいコマンド'"
          }
        ]
      }
    ]
  }
}
```

**Hook種類**:
- `PreToolUse` - ツール実行前（検証、警告）
- `PostToolUse` - ツール実行後（チェック、フォーマット）
- `Stop` - セッション終了時（最終検証）

**matcher対象**: `Edit`, `Write`, `Bash`, `Grep`, `Glob`, `Read` 等

---

### 6. 該当なしの場合

「今回のセッションでは自動化パターンの該当はありませんでした。」と報告して終了。
